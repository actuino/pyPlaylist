<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="{{ url_for('static', filename='bower_components/jquery/dist/jquery.min.js')}}"></script>
	<script src="{{ url_for('static', filename='bower_components/bootstrap/dist/js/bootstrap.min.js')}}"></script>
	<link href="{{ url_for('static', filename='bower_components/bootstrap/dist/css/bootstrap.min.css')}}" rel="stylesheet"/>
	<link href="{{ url_for('static', filename='bower_components/bootstrap/dist/css/bootstrap-theme.min.css')}}" rel="stylesheet"/>

	<script>
		$(document).ready(function() {
			var refreshNowPlaying = function() {
				$.get("/playing/", function(data,result,response) {
					console.log("Refreshing now playing.")
					$("#now_playing").text(JSON.parse(data).playlist);
				})
			};

			refreshNowPlaying();

			setInterval(function(){
				refreshNowPlaying();
			},10000)

			$("button.resume").click(function(ev) {
				$.post({
					url: "/resume/",
					data: {},
					success: function() {
					}
				});
			});
			$("button.stop").click(function(ev) {
				$.post({
					url: "/stop/",
					data: {},
					success: function() {
					}
				});
			});
			$("button.playlist").click(function(ev) {
				$("button.playlist").removeClass('active')

				$(this).toggleClass('active')
				$.post({
					url: "/play/",
					data: {"playlist":$(this).attr('id')},
					success: function() {
						$("#now_playing").text("Fetching name..");
					}
				});
			});
		});
	</script>
<title>pyPlaylist</title>
</head>
<body>
<div class="container">
	<h2>pyPlaylist <small>radio/music player</small></h2>

	<div class="content">
		{% block body %}{% endblock %}
	</div>
</div>
</body>
</html>